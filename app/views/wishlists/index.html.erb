<div class="min-h-screen bg-[#f5f5fb] text-gray-900">
  <main class="max-w-6xl mx-auto px-6 pt-10 pb-16">

    <div class="flex items-center justify-between mb-6">
      <div class="flex items-center gap-4">
        <%= link_to "← Back to Dashboard",
                    dashboard_path,
                    class: "inline-flex items-center px-4 py-2 rounded-full border border-gray-300 text-sm text-gray-700 hover:bg-gray-100" %>
        <h1 class="text-3xl font-semibold">Wishlist</h1>
      </div>
    </div>

    <% if @wishlist_items.any? %>
      <div class="grid gap-5 md:grid-cols-2 lg:grid-cols-3">
        <% @wishlist_items.each do |wishlist| %>
          <% idea = wishlist.ai_gift_suggestion %>

          <div id="wishlist_<%= wishlist.id %>"
               class="bg-white rounded-3xl shadow-sm border border-gray-200 overflow-hidden flex flex-col">

            <% if idea.image_url.present? %>
              <img src="<%= idea.image_url %>"
                   class="w-full h-32 object-cover"
                   alt="<%= idea.title %>">
            <% end %>

            <div class="p-4 flex flex-col flex-1">
              <p class="text-xs text-gray-400 mb-1">
                <%= idea.event.event_name %> • <%= idea.recipient.name %>
              </p>

              <h2 class="font-semibold text-sm mb-1"><%= idea.title %></h2>

              <p class="text-xs text-gray-600 mb-2 flex-1">
                <%= truncate(idea.description.to_s, length: 120) %>
              </p>

              <p class="text-[11px] text-gray-500 mb-3">
                <%= idea.estimated_price %>
              </p>

              <div class="flex items-center justify-between mt-auto">
                <%= button_to "Move to cart",
                              move_to_cart_wishlist_path(wishlist),
                              method: :post,
                              class: "text-xs font-medium text-[#a855f7] hover:underline",
                              form: { data: { turbo: true } } %>

                <%= button_to toggle_wishlist_event_ai_gift_suggestion_path(idea.event, idea),
                              method: :post,
                              class: "text-xs text-red-500",
                              form: { data: { turbo: false } } do %>
                  Remove
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="bg-white rounded-3xl border border-dashed border-gray-300 px-6 py-10 text-center">
        <p class="text-sm text-gray-500">Your wishlist is empty.</p>
      </div>
    <% end %>

  </main>
</div>
