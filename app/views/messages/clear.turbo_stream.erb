<!-- app/views/messages/clear.turbo_stream.erb -->
<%= turbo_stream.update "messages" do %>
  <div class="flex flex-col items-center justify-center h-full text-center">
    <div class="w-16 h-16 rounded-full bg-[#f4e6ff] flex items-center justify-center mb-4">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-[#a855f7]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
    </div>
    <p class="text-gray-400 text-sm">Chat cleared</p>
    <p class="text-gray-400 text-xs mt-1">Start a new conversation with <%= @friend.name %>!</p>
  </div>
<% end %>

<%= turbo_stream.prepend "flash-messages" do %>
  <div class="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-xl shadow-lg z-50 animate-fadeIn">
    <div class="flex items-center gap-3">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
      <span>Chat with <%= @friend.name %> has been cleared from your view</span>
    </div>
  </div>
<% end %>

<script>
    setTimeout(() => {
        const flash = document.querySelector('.animate-fadeIn');
        if (flash) {
            flash.style.transition = 'opacity 0.5s ease-out';
            flash.style.opacity = '0';
            setTimeout(() => flash.remove(), 500);
        }
    }, 3000);
</script>
