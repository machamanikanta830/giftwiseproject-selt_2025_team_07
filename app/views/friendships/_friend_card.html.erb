<!-- app/views/friendships/_friend_card.html.erb -->

<div id="friend_card_<%= friend.id %>" class="flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all">
  <div class="flex items-center gap-3">
    <div class="relative flex-shrink-0">
      <div class="w-12 h-12 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center">
        <span class="text-white font-bold text-lg"><%= friend.name.first.upcase %></span>
      </div>
      <div class="absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 rounded-full border-2 border-white"></div>
    </div>
    <div>
      <p class="font-semibold text-gray-900"><%= friend.name %></p>
      <p class="text-xs text-green-600 mt-0.5 flex items-center gap-1 font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
          <polyline points="22 4 12 14.01 9 11.01" />
        </svg>
        Friends
      </p>
    </div>
  </div>

  <div class="flex items-center gap-2">
    <%= link_to messages_path(friend_id: friend.id), class: "px-5 py-2 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition-colors inline-flex items-center gap-2" do %>
      <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
      </svg>
      Message
    <% end %>

    <% friendship = current_user.friendships.find_by(friend: friend) %>
    <% if friendship %>
      <%= button_to friendship_path(friendship), method: :delete, class: "p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors", data: { turbo_stream: true, turbo_confirm: "Unfriend #{friend.name}?" }, title: "Remove" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
          <circle cx="9" cy="7" r="4" />
          <line x1="17" y1="8" x2="22" y2="13" />
          <line x1="22" y1="8" x2="17" y2="13" />
        </svg>
      <% end %>
    <% end %>
  </div>
</div>
