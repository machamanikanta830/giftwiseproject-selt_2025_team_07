<div class="min-h-screen bg-[#f5f5fb]">
  <header class="w-full bg-white shadow-sm">
    <div class="max-w-6xl mx-auto flex items-center justify-between px-6 py-4">
      <div class="flex items-center gap-2">
        <div class="w-9 h-9 rounded-2xl bg-[#f4e6ff] flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg"
               viewBox="0 0 24 24"
               class="w-6 h-6 text-[#a855f7]"
               fill="none"
               stroke="currentColor"
               stroke-width="2"
               stroke-linecap="round"
               stroke-linejoin="round">
            <rect x="3" y="8" width="18" height="13" rx="2" ry="2"></rect>
            <path d="M12 8v13"></path>
            <path d="M3 12h18"></path>
            <path d="M12 8h4a2 2 0 0 0 0-4c-3 0-4 4-4 4z"></path>
            <path d="M12 8H8a2 2 0 0 1 0-4c3 0 4 4 4 4z"></path>
          </svg>
        </div>
        <span class="text-xl font-semibold tracking-tight">GiftWise</span>
      </div>

      <nav class="flex items-center gap-6 text-sm font-medium">
        <span class="text-gray-700">Welcome, <%= current_user.name %>!</span>
        <%= button_to "Log Out", logout_path, method: :delete, class: "px-5 py-2 rounded-full bg-black text-white hover:bg-gray-900 transition" %>
      </nav>
    </div>
  </header>

  <div class="max-w-4xl mx-auto px-6 py-12">
    <%= link_to events_path, class: "inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6" do %>
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 19 5 12 12 5"></polyline>
      </svg>
      Back to Events
    <% end %>

    <div class="bg-white rounded-3xl p-8 shadow-sm border border-gray-200">
      <div class="flex items-start justify-between mb-6">
        <div>
          <h1 class="text-3xl font-bold mb-2"><%= @event.event_name %></h1>
          <div class="flex items-center gap-4 text-sm text-gray-600">
            <span class="flex items-center gap-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
              <%= @event.event_date.strftime("%B %d, %Y") %>
            </span>

            <% if @event.location.present? %>
              <span class="flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                  <circle cx="12" cy="10" r="3"></circle>
                </svg>
                <%= @event.location %>
              </span>
            <% end %>

            <% if @event.budget.present? %>
              <span class="flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="1" x2="12" y2="23"></line>
                  <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
                $<%= number_with_precision(@event.budget, precision: 2) %>
              </span>
            <% end %>
          </div>
        </div>

        <div class="flex gap-2">
          <!-- Add Recipients (jumps to recipients section on edit form) -->
          <%= link_to "Add Recipients",
                      edit_event_path(@event, anchor: "recipients"),
                      class: "px-4 py-2 rounded-full bg-[#a855f7] text-white text-sm font-medium hover:bg-[#9333ea] transition" %>

          <!-- Edit whole event -->
          <%= link_to "Edit Event",
                      edit_event_path(@event),
                      class: "px-4 py-2 rounded-full bg-gray-100 hover:bg-gray-200 text-sm font-medium transition" %>

          <!-- Delete -->
          <%= button_to event_path(@event),
                        method: :delete,
                        data: { confirm: "Are you sure you want to delete this event?" },
                        class: "px-4 py-2 rounded-full bg-red-100 hover:bg-red-200 text-red-700 text-sm font-medium transition" do %>
            Delete
          <% end %>
        </div>

      </div>

      <% if @event.description.present? %>
        <div class="mb-6 pb-6 border-b border-gray-200">
          <h3 class="text-sm font-semibold text-gray-700 mb-2">Description</h3>
          <p class="text-gray-600"><%= @event.description %></p>
        </div>
      <% end %>

      <% if @event_recipients.any? %>
        <div>
          <h3 class="text-lg font-semibold mb-4">Recipients</h3>
          <div class="space-y-3">
            <% @event_recipients.each do |event_recipient| %>
              <div class="flex items-center justify-between p-4 border border-gray-200 rounded-2xl">
                <div>
                  <p class="font-medium"><%= event_recipient.recipient.name %></p>
                  <% if event_recipient.recipient.relationship.present? %>
                    <p class="text-sm text-gray-500"><%= event_recipient.recipient.relationship %></p>
                  <% end %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      <% else %>
        <div class="text-center py-8 text-gray-500">
          <p>No recipients added yet</p>
        </div>
      <% end %>
    </div>
  </div>
</div>